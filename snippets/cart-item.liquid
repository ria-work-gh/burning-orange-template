{%- comment -%}
  Renders a single cart line item as a grid row.
  Columns: image | description (title, variant, swatch) | price | qty | remove
  Mobile: 3 columns with subrow for qty + remove.

  Expects:
    - item: cart line item object

  Usage:
    {% render 'cart-item', item: item %}
{%- endcomment -%}

<div class="cart-item-row" data-key="{{ item.key }}">
  <div class="cart-col-item">
    {%- if item.image -%}
      <a href="{{ item.url }}">
        {{ item.image | image_url: width: 300 | image_tag:
            loading: 'lazy',
            class: 'cart-item-image',
            width: item.image.width,
            height: item.image.height
        }}
      </a>
    {%- endif -%}
  </div>

  <div class="cart-col-description">
    <a href="{{ item.url }}" class="cart-item-title">{{ item.product.title }}</a>
    {%- if item.product.metafields.custom.color_name != blank -%}
      <span class="cart-item-variant">
        {%- if item.product.metafields.custom.color_hex != blank -%}
          <span class="cart-swatch" style="--hex: {{ item.product.metafields.custom.color_hex }}"></span>
        {%- endif -%}
        {{ item.product.metafields.custom.color_name | downcase }}
      </span>
    {%- endif -%}
    <div class="cart-col-item-actions">
      {% render 'quantity-selector',
        value: item.quantity,
        name: 'updates[]',
        min: 0,
        max: item.variant.inventory_quantity | default: 99,
        data_key: item.key
      %}
    </div>
  </div>

  <div class="cart-col-price">
    {%- if item.original_line_price != item.final_line_price -%}
      <span class="cart-item-compare-price">{{ item.original_line_price | money }}</span>
      <span class="cart-item-sale-price">{{ item.final_line_price | money }}</span>
    {%- else -%}
      <span>{{ item.final_line_price | money }}</span>
    {%- endif -%}
    <button
      type="button"
      class="cart-item-remove cart-item-remove-mobile"
      data-remove="{{ item.key }}"
      aria-label="{{ 'cart.general.remove_item' | t: title: item.product.title }}"
    >
      {{ 'cart.general.remove' | t }}
    </button>
  </div>

  <div class="cart-col-qty">
    {% render 'quantity-selector',
      value: item.quantity,
      name: 'updates[]',
      min: 0,
      max: item.variant.inventory_quantity | default: 99,
      data_key: item.key
    %}
  </div>

  <div class="cart-col-remove">
    <button
      type="button"
      class="cart-item-remove"
      data-remove="{{ item.key }}"
      aria-label="{{ 'cart.general.remove_item' | t: title: item.product.title }}"
    >
      {{ 'cart.general.remove' | t }}
    </button>
  </div>

  {%- comment -%} Mobile subrow: qty + remove (visible < 1024px) {%- endcomment -%}
  <div class="cart-item-subrow">
    {% render 'quantity-selector',
      value: item.quantity,
      name: 'updates[]',
      min: 0,
      max: item.variant.inventory_quantity | default: 99,
      data_key: item.key
    %}
    <button
      type="button"
      class="cart-item-remove"
      data-remove="{{ item.key }}"
      aria-label="{{ 'cart.general.remove_item' | t: title: item.product.title }}"
    >
      {{ 'cart.general.remove' | t }}
    </button>
  </div>
</div>

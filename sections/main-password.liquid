<div class="password color-{{ section.settings.color_scheme }}">
  <div class="password-container">
    <div class="password-logo">
      {%- if settings.favicon -%}
        {{ settings.favicon | image_url: width: 64 | image_tag: alt: shop.name }}
      {%- else -%}
        <span class="password-shop-name text-cap">{{ shop.name }}</span>
      {%- endif -%}
    </div>

    <h1 class="password-heading text-xl">
      {%- if section.settings.heading != blank -%}
        {{ section.settings.heading }}
      {%- else -%}
        {{ 'password.general.title' | t }}
      {%- endif -%}
    </h1>

    {%- if section.settings.message != blank -%}
      <div class="password-message typeset">
        {{ section.settings.message }}
      </div>
    {%- else -%}
      <p class="password-message">
        {{ 'password.general.message' | t }}
      </p>
    {%- endif -%}

    <div class="password-form-wrapper">
      {% form 'storefront_password', class: 'password-form' %}
        {%- if form.errors -%}
          <div class="form-error" role="alert">
            {{ form.errors | default_errors }}
          </div>
        {%- endif -%}

        <div class="form-inline">
          <label for="password-input" class="visually-hidden">
            {{ 'password.general.password_label' | t }}
          </label>
          <input
            type="password"
            id="password-input"
            name="password"
            class="input"
            placeholder="{{ 'password.general.password_placeholder' | t }}"
            required
          >
          <button type="submit" class="button button-primary">
            {{ 'password.general.enter' | t }}
          </button>
        </div>
      {% endform %}
    </div>

    <p class="password-admin text-mini text-light">
      {{ 'password.general.admin_link' | t | split: 'Log in here' | first }}
      <a href="/admin" class="inline-link">Log in here</a>
    </p>
  </div>
</div>

{% stylesheet %}
  .password-section {
    min-height: 100vh;
    min-height: 100dvh;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .password {
    width: 100%;
    padding: var(--spacing-m) var(--spacing-base);
    text-align: center;
    display: flex;
    justify-content: center;
  }

  .password-container {
    max-width: 480px;
    width: 100%;
  }

  .password-logo {
    margin-bottom: var(--spacing-m);
  }

  .password-heading {
    margin-bottom: var(--spacing-s);
  }

  .password-message {
    color: var(--color-text-light);
    margin-bottom: var(--spacing-m);
  }

  .password-form-wrapper {
    margin-bottom: var(--spacing-m);
  }

  .password-form .form-error {
    margin-bottom: var(--spacing-base);
  }

  .password-admin {
    margin-top: var(--spacing-m);
  }
{% endstylesheet %}

{% schema %}
{
  "name": "Password page",
  "tag": "section",
  "class": "password-section",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "info": "Leave blank to use default translation"
    },
    {
      "type": "richtext",
      "id": "message",
      "label": "Message",
      "info": "Leave blank to use default translation"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Color scheme",
      "default": "scheme-1"
    }
  ]
}
{% endschema %}

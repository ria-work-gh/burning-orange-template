<section
  class="hero hero-{{ section.settings.min_height }} color-{{ section.settings.color_scheme }}"
>
  {%- if section.settings.image -%}
    <div class="hero-image">
      {{
        section.settings.image
        | image_url: width: 1920
        | image_tag:
          loading: 'eager',
          sizes: '100vw',
          class: 'hero-banner__image',
          width: section.settings.image.width,
          height: section.settings.image.height
      }}
      {%- if section.settings.overlay_opacity > 0 -%}
        <div class="hero-overlay" style="opacity: {{ section.settings.overlay_opacity | divided_by: 100.0 }};"></div>
      {%- endif -%}
    </div>
  {%- endif -%}

  <div class="hero-card">
    <div class="hero-content">
      {%- if section.settings.heading != blank -%}
        {%- if template.name == 'index' -%}
          <h1 class="hero-heading text-xl">{{ section.settings.heading }}</h1>
        {%- else -%}
          <h2 class="hero-heading text-xl">{{ section.settings.heading }}</h2>
        {%- endif -%}
      {%- endif -%}

      {%- if section.settings.subheading != blank -%}
        <p class="hero-subheading">{{ section.settings.subheading }}</p>
      {%- endif -%}

      {%- if section.blocks.size > 0 -%}
        <div class="hero-buttons">
          {%- for block in section.blocks -%}
            {%- if block.settings.text != blank and block.settings.link != blank -%}
              <a
                href="{{ block.settings.link }}"
                class="button{% if block.settings.style == 'secondary' %} secondary{% endif %}"
                {{ block.shopify_attributes }}
              >
                {{ block.settings.text }}
              </a>
            {%- endif -%}
          {%- endfor -%}
        </div>
      {%- endif -%}
    </div>
  </div>
</section>

{% stylesheet %}
  .hero {
    position: relative;
    display: flex;
    align-items: flex-end;
    justify-content: flex-start;
    padding: var(--spacing-base) var(--spacing-base);
    overflow: hidden;
  }

  .hero-small {
    min-height: 40vh;
  }
  .hero-medium {
    min-height: 60vh;
  }
  .hero-large {
    min-height: 80vh;
  }
  .hero-full {
    min-height: 100vh;
  }

  .hero-image {
    position: absolute;
    inset: 0;
  }

  .hero-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .hero-overlay {
    position: absolute;
    inset: 0;
    background: black;
  }

  .hero-card {
    position: relative;
    z-index: 1;
    width: 100%;
    background: white;
    color: black;
    padding: var(--spacing-base);
    border-radius: 0;
  }

  .hero-content {
    text-align: left;
  }

  .hero-subheading {
    margin-top: var(--spacing-s);
  }

  .hero-buttons {
    display: flex;
    flex-wrap: wrap;
    gap: var(--spacing-s);
    margin-top: var(--spacing-base);
  }

  @media (min-width: 750px) {
    .hero-card {
      width: 50%;
    }
  }

  @media (min-width: 990px) {
    .hero-card {
      width: 33.333%;
    }
  }
{% endstylesheet %}

{% schema %}
{
  "name": "Hero banner",
  "tag": "section",
  "class": "hero-section",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Welcome to our store"
    },
    {
      "type": "text",
      "id": "subheading",
      "label": "Subheading"
    },
    {
      "type": "image_picker",
      "id": "image",
      "label": "Background image"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Color scheme",
      "default": "scheme-1"
    },
    {
      "type": "select",
      "id": "min_height",
      "label": "Section height",
      "options": [
        { "value": "small", "label": "Small" },
        { "value": "medium", "label": "Medium" },
        { "value": "large", "label": "Large" },
        { "value": "full", "label": "Full screen" }
      ],
      "default": "medium"
    },
    {
      "type": "range",
      "id": "overlay_opacity",
      "label": "Image overlay opacity",
      "min": 0,
      "max": 100,
      "step": 10,
      "default": 0,
      "unit": "%"
    }
  ],
  "blocks": [
    {
      "type": "button",
      "name": "Button",
      "limit": 2,
      "settings": [
        {
          "type": "text",
          "id": "text",
          "label": "Button text",
          "default": "Shop now"
        },
        {
          "type": "url",
          "id": "link",
          "label": "Link"
        },
        {
          "type": "select",
          "id": "style",
          "label": "Style",
          "options": [
            { "value": "primary", "label": "Primary" },
            { "value": "secondary", "label": "Secondary" }
          ],
          "default": "primary"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Hero banner",
      "blocks": [{ "type": "button" }]
    }
  ]
}
{% endschema %}

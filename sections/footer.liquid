{%- comment -%} Footer: newsletter + link columns + logomark. {%- endcomment -%}
<footer class="footer{% if section.settings.color_scheme != blank %} color-{{ section.settings.color_scheme }}{% endif %}">
  <div class="footer-columns">
    {%- comment -%} Newsletter block (rendered separately, left side) {%- endcomment -%}
    {%- for block in section.blocks -%}
      {%- if block.type == 'newsletter' -%}
        <div class="footer-newsletter" {{ block.shopify_attributes }}>
          {%- if block.settings.heading != blank -%}
            <span class="text-cap">{{ block.settings.heading }}</span>
          {%- endif -%}
          {%- if block.settings.description != blank -%}
            <p>{{ block.settings.description }}</p>
          {%- endif -%}
          {% render 'newsletter-form' %}
        </div>
      {%- endif -%}
    {%- endfor -%}

    {%- comment -%} Link columns (right side) {%- endcomment -%}
    <div class="footer-menu">
      {%- for block in section.blocks -%}
        {%- if block.type == 'link_list' -%}
          <div class="footer-column" {{ block.shopify_attributes }}>
            {%- if block.settings.heading != blank -%}
              <h3 class="footer-heading text-cap text-mini">{{ block.settings.heading }}</h3>
            {%- endif -%}
            {%- if block.settings.menu != blank -%}
              <ul class="footer-links unstyled-list">
                {%- for link in block.settings.menu.links -%}
                  <li>
                    <a href="{{ link.url }}" class="footer-link">{{ link.title }}</a>
                  </li>
                {%- endfor -%}
              </ul>
            {%- endif -%}
          </div>
        {%- endif -%}
      {%- endfor -%}
    </div>
  </div>

  <div class="footer-bottom">
    <svg width="85" height="80" viewBox="0 0 85 80" fill="none" xmlns="http://www.w3.org/2000/svg" class="footer-logo" role="img" aria-label="{{ shop.name }}">
      <path d="M42.4561 80C66.0792 80 84.9123 62.5992 84.9123 40.0547C84.9123 16.6347 64.8817 0 42.4561 0C19.9217 0 0 16.5253 0 40.0547C0 63.0369 19.2686 80 42.4561 80ZM22.861 67.7428C16.4381 61.5048 12.5191 52.093 12.0837 42.2435C22.2078 43.5568 25.5825 50.1231 25.5825 57.7839C25.5825 61.3954 24.8205 64.8974 22.861 67.7428ZM12.0837 37.8659C12.5191 27.7975 16.547 18.6047 22.861 12.4761C24.8205 15.3215 25.5825 18.7141 25.5825 22.3256C25.5825 29.9863 22.2078 36.5527 12.0837 37.8659ZM42.4561 75.6224C37.6662 75.6224 33.3117 74.528 29.5016 72.5581C34.1826 69.0561 37.013 64.2408 37.013 58.2216C37.013 49.5759 30.8079 42.9001 22.6433 40.0547C30.8079 37.2093 37.013 30.5335 37.013 21.8878C37.013 15.9781 34.0738 11.0534 29.5016 7.66074C33.4206 5.5814 37.7751 4.487 42.4561 4.487C47.0283 4.487 51.3828 5.5814 55.3018 7.66074C50.8385 11.0534 47.8992 15.9781 47.8992 21.8878C47.8992 30.5335 54.1044 37.2093 62.269 40.0547C54.1044 42.9001 47.8992 49.5759 47.8992 58.2216C47.8992 64.1313 50.7296 68.9467 55.3018 72.4487C51.4917 74.4186 47.0283 75.6224 42.4561 75.6224ZM62.0513 67.6334C60.0918 64.788 59.3297 61.3954 59.3297 57.7839C59.3297 50.1231 62.8133 43.5568 72.9375 42.2435C72.3932 52.8591 68.3653 61.6142 62.0513 67.6334ZM72.9375 37.8659C62.8133 36.5527 59.3297 29.9863 59.3297 22.3256C59.3297 18.7141 60.0918 15.212 61.9424 12.4761C68.2564 18.4952 72.3932 27.3598 72.9375 37.8659Z" fill="currentColor" />
    </svg>
    {%- assign current_year = 'now' | date: '%Y' -%}
    <p class="footer-copyright">{{ 'footer.copyright' | t: year: current_year, shop_name: shop.name }}</p>
  </div>

  {%- if section.settings.show_payment_icons and shop.enabled_payment_types.size > 0 -%}
    <div class="footer-payment">
      {% render 'payment-icons' %}
    </div>
  {%- endif -%}
</footer>

{% stylesheet %}
  /* Footer layout */
  .footer {
    padding: var(--spacing-4) var(--spacing-2) var(--spacing-2);
    display: grid;
    gap: var(--spacing-3);
  }

  /* Columns: newsletter left, menu right */
  .footer-columns {
    display: grid;
    gap: var(--spacing-3) var(--spacing-2);
  }

  @media (min-width: 750px) {
    .footer-columns {
      display: flex;
      justify-content: space-between;
      align-items: start;
    }
  }

  /* Newsletter */
  .footer-newsletter {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-2);
    max-width: 55ch;
  }

  @media (min-width: 1024px) {
    .footer-newsletter {
      width: 55ch;
    }
  }

  /* Link columns grid */
  .footer-menu {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: var(--spacing-3) var(--spacing-2);
  }

  @media (min-width: 1024px) {
    .footer-menu {
      width: 55ch;
    }
  }

  /* Column */
  .footer-column {
    display: flex;
    flex-direction: column;
  }

  .footer-heading {
    margin-bottom: var(--spacing-1);
    color: var(--color-text-muted);
  }

  .footer-links {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-1);
  }

  .footer-link {
    transition: color var(--transition-fast);
  }

  .footer-link:hover {
    color: var(--color-text-muted);
  }

  /* Newsletter form inline button */
  .newsletter-input-wrap {
    display: flex;
    align-items: center;
    position: relative;
  }

  .newsletter-submit {
    padding: var(--spacing-1);
    position: absolute;
    right: var(--spacing-1);
    transition: color var(--transition-fast);
    font-size: var(--font-detail-size);
    color: var(--color-text-muted);
  }

  .newsletter-submit:hover {
    color: var(--color-accent);
  }

  /* Bottom: logo + copyright */
  .footer-bottom {
    display: grid;
    gap: var(--spacing-2);
    justify-items: center;
    margin-top: var(--spacing-3);
  }

  .footer-logo {
    width: 120px;
    height: auto;
  }

  .footer-logo path {
    transition: fill var(--transition-base);
  }

  .footer-copyright {
    font-size: var(--font-detail-size);
  }

  /* Payment icons */
  .footer-payment {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: var(--spacing-1);
    margin-top: var(--spacing-2);
    padding-top: var(--spacing-2);
    border-top: 1px solid var(--color-text-muted);
  }

  .footer-payment .payment-icon svg {
    height: 24px;
    width: auto;
  }
{% endstylesheet %}

{% schema %}
{
  "name": "Footer",
  "settings": [
    {
      "type": "checkbox",
      "id": "show_payment_icons",
      "label": "Show payment icons",
      "default": false
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Color scheme"
    }
  ],
  "blocks": [
    {
      "type": "link_list",
      "name": "Navigation column",
      "limit": 4,
      "settings": [
        {
          "type": "text",
          "id": "heading",
          "label": "Heading"
        },
        {
          "type": "link_list",
          "id": "menu",
          "label": "Menu"
        }
      ]
    },
    {
      "type": "newsletter",
      "name": "Newsletter",
      "limit": 1,
      "settings": [
        {
          "type": "text",
          "id": "heading",
          "label": "Heading",
          "default": "Step into the world of Burning Orange"
        },
        {
          "type": "textarea",
          "id": "description",
          "label": "Description",
          "default": "Join the Burning Orange mailing list. We'll send you the first look at new collections, and styling advice."
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Footer",
      "blocks": [
        {
          "type": "newsletter"
        },
        {
          "type": "link_list"
        }
      ]
    }
  ]
}
{% endschema %}
